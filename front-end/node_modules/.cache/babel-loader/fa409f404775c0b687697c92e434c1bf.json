{"remainingRequest":"/Users/wuenting/WebstormProjects/myblog/front-end/node_modules/babel-loader/lib/index.js!/Users/wuenting/WebstormProjects/myblog/front-end/node_modules/eslint-loader/index.js??ref--13-0!/Users/wuenting/WebstormProjects/myblog/front-end/src/request/index.js","dependencies":[{"path":"/Users/wuenting/WebstormProjects/myblog/front-end/src/request/index.js","mtime":1587534568070},{"path":"/Users/wuenting/WebstormProjects/myblog/front-end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wuenting/WebstormProjects/myblog/front-end/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wuenting/WebstormProjects/myblog/front-end/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBodHRwIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHFzIGZyb20gJ3F1ZXJ5c3RyaW5nJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKdmFyIGF4aW9zID0gaHR0cC5jcmVhdGUoewogIGJhc2VVUkw6ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAnLAogIHRpbWVvdXQ6IDEwMDAsCiAgaGVhZGVyczogewogICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogIH0KfSk7CmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlcykgewogIGlmIChyZXMuZGF0YS5jb2RlICYmIHJlcy5kYXRhLmNvZGUgPT09IDQwMSkgewogICAgLy8gNDAxLCB0b2tlbuWkseaViAogICAgVnVlLnByb3RvdHlwZS4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tc2cpOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIHJvdXRlci5wdXNoKCcvc2lnbmluJyk7CiAgICB9LCA1MDApOwogIH0KCiAgcmV0dXJuIHJlczsKfSwgZnVuY3Rpb24gKGVycikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwp9KTsKYXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBjb25maWcuaGVhZGVyc1sndG9rZW4nXSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSB8fCAnJzsKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGZ1bmN0aW9uIHBvc3QodXJsLCBkYXRhKSB7CiAgcmV0dXJuIGF4aW9zLnBvc3QodXJsLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgIHJldHVybiByZXMuZGF0YTsKICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICByZXR1cm4gZXJyOwogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiBwdXQodXJsLCBkYXRhKSB7CiAgcmV0dXJuIGF4aW9zLnB1dCh1cmwsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgcmV0dXJuIHJlcy5kYXRhOwogIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgIHJldHVybiBlcnI7CiAgfSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldCh1cmwsIGRhdGEpIHsKICB2YXIgcXN0cmluZyA9IHFzLnN0cmluZ2lmeShkYXRhKTsKICByZXR1cm4gYXhpb3MuZ2V0KHVybCArICI/IiArIHFzdHJpbmcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgcmV0dXJuIHJlcy5kYXRhOwogIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgIHJldHVybiBlcnI7CiAgfSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZUZldGNoKHVybCwgZGF0YSkgewogIHJldHVybiBheGlvcy5kZWxldGUodXJsLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgIHJldHVybiByZXMuZGF0YTsKICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICByZXR1cm4gZXJyOwogIH0pOwp9"},{"version":3,"sources":["/Users/wuenting/WebstormProjects/myblog/front-end/src/request/index.js"],"names":["http","qs","router","Vue","axios","create","baseURL","timeout","headers","interceptors","response","use","res","data","code","prototype","$message","error","msg","setTimeout","push","err","Promise","reject","request","config","window","localStorage","getItem","post","url","then","catch","put","get","qstring","stringify","deleteFetch","delete"],"mappings":"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","sourcesContent":["import http from 'axios'\nimport qs from 'querystring';\nimport router from '@/router'\nimport Vue from 'vue'\n\n\nconst axios = http.create({\n  baseURL: 'http://127.0.0.1:3000',\n  timeout: 1000,\n  headers: {'Content-Type': 'application/json'}\n});\n\naxios.interceptors.response.use((res) => {\n  if (res.data.code && res.data.code === 401) { // 401, token失效\n    Vue.prototype.$message.error(res.data.msg);\n    setTimeout(()=> {\n      router.push('/signin')\n    }, 500)\n  }\n  return res\n}, (err) => {\n  return Promise.reject(err)\n})\n\naxios.interceptors.request.use((config) => {\n  config.headers['token'] = window.localStorage.getItem('token') || ''\n  return config\n}, error => {\n  return Promise.reject(error)\n})\n\nexport function post(url, data) {\n  return axios.post(url, data)\n    .then(function (res) {\n      return res.data\n    }).catch(function (err) {\n      return err\n    })\n}\n\nexport function put(url, data) {\n  return axios.put(url, data)\n    .then(function (res) {\n      return res.data\n    }).catch(function (err) {\n      return err\n    })\n}\n\nexport function get(url, data) {\n  const qstring = qs.stringify(data);\n  return axios.get(url+\"?\"+qstring, )\n    .then(function (res) {\n      return res.data\n    }).catch(function (err) {\n      return err\n    })\n}\n\nexport function deleteFetch(url, data) {\n  return axios.delete(url, data)\n    .then(function (res) {\n      return res.data\n    }).catch(function (err) {\n      return err\n    })\n}\n"]}]}